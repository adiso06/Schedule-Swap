2. Payback Swap Finder (Future Consideration / Separate Feature Logic)
12.1 Purpose: To assist residents who have completed an initial swap (where Resident B on Elective covered Resident A's Required shift on Day X) in finding a future date (Day Y) where Resident A can reciprocate by covering one of Resident B's Required shifts. This helps fulfill the informal "payback" obligation.

12.2 Scope: This feature logic searches the schedule after an initial swap date (Day X) to identify potential dates where a valid "payback" swap is possible according to the established rules. It does not track obligations or guarantee a payback swap occurs. It identifies possibilities for the users to consider.

12.3 Inputs (for the Payback Finder function):

Resident A Name (who originally had the Required shift covered)

Resident B Name (who originally covered the Required shift)

Original Swap Date (Day X - used as the start date for the search)

12.4 Core Logic:

Retrieve the full parsed schedule and PGY data.

Iterate through all dates (Day Y) in the schedule after Day X.

For each Day Y:

Get Resident A's assignment (Assign A_Y) and Resident B's assignment (Assign B_Y) for that day.

Determine the types: Type(A_Y) and Type(B_Y) using the classification logic (Section 7).

Check Payback Condition: Verify if Type(A_Y) is Elective AND Type(B_Y) is Required. If this specific condition is not met, continue to the next date.

Full Validation: If the payback condition is met, perform a full validation check for a swap between Resident A (Assign A_Y) and Resident B (Assign B_Y) on Day Y using all standard rules (C1-C7 from Section 6).

If the full validation passes, Day Y is a potential payback date. Add this date and the relevant assignments (Assign A_Y, Assign B_Y) to a list of possibilities.

12.5 Outputs:

A list of potential future dates (Day Y) where Resident A (on Elective) could validly cover Resident B's Required shift. Each item in the list should include:

The Date (Day Y)

Resident A's Elective Assignment on Day Y

Resident B's Required Assignment on Day Y

12.6 User Interface (Conceptual): This logic could be triggered by:

A separate button/section in the UI labeled "Find Payback Options".

An option presented after a user views the results of an initial Required <-> Elective swap.

12.7 Assumptions:

The system does not enforce or track payback obligations; it merely identifies technically valid opportunities based on the rules.

The definition of a "payback" scenario (Resident A on Elective covers Resident B on Required) is fixed.

All standard swap rules (C1-C7) must still apply to the potential payback swap for it to be considered valid.